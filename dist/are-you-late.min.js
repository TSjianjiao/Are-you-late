(()=>{"use strict";var e={903:function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return i(t,e),t},r=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,o){function r(e){try{u(s.next(e))}catch(e){o(e)}}function a(e){try{u(s.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((s=s.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const u=a(n(349)),d=a(n(522)),l=a(n(391)),c=n(836),f=a(n(94)),p=a(n(68)),h=a(n(90)),m=o(n(831)),g=n(854),y=a(n(418)),v=n(461);v.EventFlow.addUser=e=>r(void 0,void 0,void 0,(function*(){const{message:t}=e,{data:{sender:{id:n,memberName:s,specialTitle:i}}}=t;yield f.default.findOneAndUpdate({qq:n},{qq:n,memberName:s,specialTitle:i},{upsert:!0}).exec()})),v.EventFlow.filter=e=>{var t,n,s,i;const{message:o}=e,r=l.default.get(o).filterByMessageChainType("GroupMessage").filterByMessageType("At").filterByTaget().filterByPlainText((e=>e.trim().includes("#"))).exec();e.filterMsg=r,e.filterText=null!==(i=null===(s=null===(n=null===(t=null==r?void 0:r.data)||void 0===t?void 0:t.messageChain)||void 0===n?void 0:n.find((e=>"Plain"===e.type)))||void 0===s?void 0:s.text)&&void 0!==i?i:""},v.EventFlow.bet=e=>r(void 0,void 0,void 0,(function*(){const t=/è¿Ÿåˆ°/gi,n=/ä¸è¿Ÿåˆ°|æ²¡æœ‰è¿Ÿåˆ°|ä¸ä¼šè¿Ÿåˆ°|ä¸å¯èƒ½è¿Ÿåˆ°|æ²¡è¿Ÿåˆ°|å‡†æ—¶åˆ°|å‡†ç‚¹åˆ°/gi,{message:s,targetQQ:i,filterText:o}=e,[r,a]=c.isBetCommand(o);if(r&&a){const e=r.search(n)>=0?m.betType.ä¸è¿Ÿåˆ°:r.search(t)>=0?m.betType.è¿Ÿåˆ°:void 0;if(void 0===e)return;const[s]=yield g.addOnlyOneDocument({qq:i,betTime:{$gt:u.default().startOf("date").toDate()}},{qq:i,betPoint:Number(a),betType:e},m.default);if(s)return void l.default.send("sendGroupMessage",d.default.group_qq).at(i).plain("\n"+g.getOneErrorMessage(s)).face(void 0,"è¯·/gun").exec();l.default.send("sendGroupMessage",d.default.group_qq).at(i).plain(`\næŠ¼æ³¨${m.betTypeText[e]}ï¼š${a}ç§¯åˆ†`).face(void 0,"åƒç³–").exec()}})),v.EventFlow.signIn=e=>r(void 0,void 0,void 0,(function*(){const{message:t,targetQQ:n,filterText:s}=e;if(c.isSignInCommand(s)){const e=y.default(),t=yield h.default.findByQQ(n),{success:s,message:i}=yield p.default.signIn(n);if(s){const{success:s,message:i}=yield t.addPoint(e);l.default.send("sendGroupMessage",d.default.group_qq).at(n).plain(s?`\nç­¾åˆ°æˆåŠŸï¼\nè·å¾—ç§¯åˆ†${e}!`:`\nç­¾åˆ°å¤±è´¥ï¼š\n${i}`).exec()}else l.default.send("sendGroupMessage",d.default.group_qq).at(n).plain(`\nç­¾åˆ°å¤±è´¥ï¼š${i}`).exec()}}))},692:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default={uri:"mongodb://admin:xh19963900@127.0.0.1:27017",connectionOptions:{useNewUrlParser:!0,useUnifiedTopology:!0,dbName:"areyoulate"}}},8:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(622));t.default={appenders:{defualt:{type:"file",filename:i.default.join(__dirname,"../log/defualt.log"),layout:{type:"coloured"}},errors:{type:"dateFile",category:"dateFileLog",filename:i.default.join(__dirname,"../log/errors/"),pattern:"yyyy-MM-dd.log",alwaysIncludePattern:!0,layout:{type:"coloured"}},ws:{type:"file",filename:i.default.join(__dirname,"../log/ws.log"),layout:{type:"coloured"}},db:{type:"file",filename:i.default.join(__dirname,"../log/db.log"),layout:{type:"coloured"}}},categories:{default:{appenders:["defualt"],level:"info"},error:{appenders:["errors"],level:"error"},ws:{appenders:["ws"],level:"info"},db:{appenders:["db"],level:"info"}}}},522:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});t.default={wsPath:"ws://ws.dangdangdang.top",httpPath:"http://api.dangdangdang.top",verifyKey:1234567890,bot_qq:1092946821,group_qq:599869861}},40:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(619)),o=s(n(692)),r=s(n(514));i.default.set("useFindAndModify",!1),i.default.connect(o.default.uri,o.default.connectionOptions,(e=>{e?(console.log("[MongooseğŸ¦¢] è¿æ¥å¤±è´¥"),r.default("db","error",e)):(console.log("[MongooseğŸ¦¢] è¿æ¥æˆåŠŸ"),r.default("db","info","[MongooseğŸ¦¢] è¿æ¥æˆåŠŸ"))})),t.default=i.default},94:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=n(619),i=new s.Schema({qq:{type:s.Schema.Types.String,required:!0},memberName:{type:s.Schema.Types.String,require:!0},specialTitle:{type:s.Schema.Types.String,require:!0}});t.default=s.models&&s.models.GameUser||s.model("GameUser",i)},831:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.betTypeText=t.betType=void 0;const i=s(n(349)),o=n(619);var r;!function(e){e[e["è¿Ÿåˆ°"]=0]="è¿Ÿåˆ°",e[e["ä¸è¿Ÿåˆ°"]=1]="ä¸è¿Ÿåˆ°"}(r=t.betType||(t.betType={})),t.betTypeText={[r.è¿Ÿåˆ°]:"è¿Ÿåˆ°",[r.ä¸è¿Ÿåˆ°]:"ä¸è¿Ÿåˆ°"};const a=new o.Schema({qq:{type:o.Schema.Types.String,required:!0},betPoint:{type:o.Schema.Types.Number,require:!0,validate:{validator:function(e){if(e<0)throw new Error("åªèƒ½æŠ•æ³¨æ­£æ•°");if(!Number.isInteger(e))throw new Error("åªèƒ½æŠ•æ³¨æ•´æ•°");return!0}}},betTime:{type:o.Schema.Types.Date,require:!1,default:()=>i.default().toDate()},betType:{type:o.Schema.Types.Number,require:!0}});t.default=o.models&&o.models.Point||o.model("Point",a)},68:function(e,t,n){var s=this&&this.__decorate||function(e,t,n,s){var i,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,o){function r(e){try{u(s.next(e))}catch(e){o(e)}}function a(e){try{u(s.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((s=s.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n(727)),u=r(n(349)),d=n(619),l=new d.Schema({qq:{type:d.Schema.Types.String,required:!0},signInTime:{type:d.Schema.Types.Date,require:!1,default:()=>u.default().toDate()}});class c{static signIn(e){return o(this,void 0,void 0,(function*(){if(yield this.findOne({qq:e,signInTime:{$gt:u.default().startOf("date").toDate()}}).exec())throw new Error("ä»Šå¤©å·²ç­¾åˆ°");yield this.create({qq:e})}))}}s([a.default("ç­¾åˆ°å¤±è´¥ï¼"),i("design:type",Function),i("design:paramtypes",[String]),i("design:returntype",Promise)],c,"signIn",null),l.loadClass(c);const f=d.model("SignIn",l);t.default=f},90:function(e,t,n){var s=this&&this.__decorate||function(e,t,n,s){var i,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,o){function r(e){try{u(s.next(e))}catch(e){o(e)}}function a(e){try{u(s.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((s=s.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(619),u=r(n(727)),d=new a.Schema({qq:{type:a.Schema.Types.String,required:!0},totalPoints:{type:a.Schema.Types.Number,require:!1,validate:{validator:function(e){if(e<0)throw new Error("ä¸èƒ½å†å‡å°‘");if(!Number.isInteger(e))throw new Error("åªèƒ½ä¸ºæ•´æ•°");return!0}},default:()=>0},remainPoints:{type:a.Schema.Types.Number,require:!1,validate:{validator:function(e){if(e<0)throw new Error("ä¸èƒ½å†å‡å°‘");if(!Number.isInteger(e))throw new Error("åªèƒ½ä¸ºæ•´æ•°");return!0}},default:()=>0}});class l{addPoint(e){return o(this,void 0,void 0,(function*(){this.updateOne({$inc:{totalPoints:e,remainPoints:e}}).exec()}))}subPoint(e){return o(this,void 0,void 0,(function*(){const t=this.remainPoints-e;yield this.updateOne({remainPoints:t<0?0:t}).exec()}))}static findByQQ(e){return o(this,void 0,void 0,(function*(){const t=yield this.findOne({qq:e}).exec();return t||(yield this.create({qq:e}))}))}}s([u.default("æ·»åŠ ç§¯åˆ†å¤±è´¥ï¼"),i("design:type",Function),i("design:paramtypes",[Number]),i("design:returntype",Promise)],l.prototype,"addPoint",null),s([u.default("å‡å°‘ç§¯åˆ†å¤±è´¥ï¼"),i("design:type",Function),i("design:paramtypes",[Number]),i("design:returntype",Promise)],l.prototype,"subPoint",null),d.loadClass(l);const c=a.model("UserPoints",d);t.default=c},854:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,o){function r(e){try{u(s.next(e))}catch(e){o(e)}}function a(e){try{u(s.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((s=s.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getOneErrorMessage=t.addOnlyOneDocument=void 0;const o=i(n(514));t.addOnlyOneDocument=function(e,t,n){return s(this,void 0,void 0,(function*(){if((yield n.find(e).exec()).length>0)return[{foo:{reason:{message:"å·²æœ‰è®°å½•"}}},!1];try{yield n.create(t)}catch(e){return o.default("db","error",e.errors),[e.errors,!1]}return[null,!0]}))},t.getOneErrorMessage=function(e){return e[Object.keys(e)[0]].reason.message}},718:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.store=void 0;const i=n(139),o=s(n(578));t.store=i.configureStore({reducer:{session:o.default}})},578:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.saveSession=t.sessionSlice=void 0;const s=n(139);t.sessionSlice=s.createSlice({name:"session",initialState:{session:""},reducers:{saveSession:(e,t)=>{e.session=t.payload}}}),t.saveSession=t.sessionSlice.actions.saveSession,t.default=t.sessionSlice.reducer},768:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CodeEnum=t.CodeText=void 0,t.CodeText={0:"æ­£å¸¸",1:"é”™è¯¯çš„verify key",2:"æŒ‡å®šçš„Botä¸å­˜åœ¨",3:"Sessionå¤±æ•ˆæˆ–ä¸å­˜åœ¨",4:"Sessionæœªè®¤è¯(æœªæ¿€æ´»)",5:"å‘é€æ¶ˆæ¯ç›®æ ‡ä¸å­˜åœ¨(æŒ‡å®šå¯¹è±¡ä¸å­˜åœ¨)",6:"æŒ‡å®šæ–‡ä»¶ä¸å­˜åœ¨ï¼Œå‡ºç°äºå‘é€æœ¬åœ°å›¾ç‰‡",10:"æ— æ“ä½œæƒé™ï¼ŒæŒ‡Botæ²¡æœ‰å¯¹åº”æ“ä½œçš„é™æƒ",11:"Botè¢«ç¦è¨€ï¼ŒæŒ‡Botå½“å‰æ— æ³•å‘æŒ‡å®šç¾¤å‘é€æ¶ˆæ¯",30:"æ¶ˆæ¯è¿‡é•¿",400:"é”™è¯¯çš„è®¿é—®ï¼Œå¦‚å‚æ•°é”™è¯¯ç­‰"},function(e){e[e.success=0]="success",e[e.errorVerifyKey=1]="errorVerifyKey",e[e.noBot=2]="noBot",e[e.sessionNotExsist=3]="sessionNotExsist",e[e.sessionNotActive=4]="sessionNotActive",e[e.targetLost=5]="targetLost",e[e.fileLost=6]="fileLost",e[e.permissionDeny=10]="permissionDeny",e[e.forbiddenWords=11]="forbiddenWords",e[e.longMessage=30]="longMessage",e[e.error=400]="error"}(t.CodeEnum||(t.CodeEnum={}))},836:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isSignInCommand=t.isBetCommand=void 0,t.isBetCommand=function(e){const t=e.split("#");if(2===t.length){const e=t[1].split(" ");if(2===e.length){const[t,n]=e;return[t,n]}}return["",""]},t.isSignInCommand=function(e){const t=/ç­¾åˆ°$/gi,n=e.split("#");return!(2!==n.length||!t.test(n[1]))}},580:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return function(e,t,n){const s=n.value;n.value=function(...e){const n=this.actionList.length;return this.actionList.push({methodName:t,params:e,method:()=>{let t;n>0?this.filteredMsg&&(t=Object.assign({},this.filteredMsg)):t=Object.assign({},this.msg),s.apply(this,[...e,t])}}),this}}}},727:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,o){function r(e){try{u(s.next(e))}catch(e){o(e)}}function a(e){try{u(s.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((s=s.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=i(n(514));t.default=function(e){return function(t,n,i){const r=i.value;i.value=function(...t){return s(this,void 0,void 0,(function*(){try{return yield r.call(this,...t),{success:!0}}catch(t){return o.default("db","error",t),{message:t.message||e}}}))}}}},514:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(455)),o=s(n(8));i.default.configure(o.default),t.default=function(e,t,n){i.default.getLogger(e)[t](n)}},418:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=100;function s(e,t){return Math.round(e+Math.random()*(t-e))}t.default=()=>Math.random()>=1-1/s(2,3)?s(1,n/s(7,10)):Math.random()>=1-1/s(3,5)?s(1,n/s(5,7)):Math.random()>=1-1/s(5,7)?s(1,n/s(3,5)):s(1,n)},372:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getSession=void 0;const s=n(718),i=n(578);t.getSession=function(e){const{session:t}=s.store.getState().session;if(t)return t;if(e)return s.store.dispatch(i.saveSession(e.data.session)),e.data.session;throw new Error("no session!")}},116:function(e,t,n){var s=this&&this.__decorate||function(e,t,n,s){var i,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(522)),a=o(n(580));class u{constructor(e){this.msg=e,this.actionList=[]}filterByMessageChainType(e,t){return t&&(t.data.type===e?this.filteredMsg=t:this.filteredMsg=void 0),this}filterByMessageType(e,t){return t&&(t.data.messageChain&&t.data.messageChain.some((t=>t.type===e))?this.filteredMsg=t:this.filteredMsg=void 0),this}filterBySender(e,t){return t&&(t.data.sender.id===e?this.filteredMsg=t:this.filteredMsg=void 0),this}filterByTaget(e=r.default.bot_qq,t){return t&&(t.data.messageChain&&t.data.messageChain.some((t=>t.target===e))?this.filteredMsg=t:this.filteredMsg=void 0),this}filterByPlainText(e,t){if(t&&t.data.messageChain){const n=t.data.messageChain.find((t=>"Plain"===t.type&&e(t.text)));this.filteredMsg=n?t:void 0}return this}exec(){return this.actionList.forEach((e=>{e.method()})),this.actionList=[],this.filteredMsg}}s([a.default(),i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",void 0)],u.prototype,"filterByMessageChainType",null),s([a.default(),i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",void 0)],u.prototype,"filterByMessageType",null),s([a.default(),i("design:type",Function),i("design:paramtypes",[Number,Object]),i("design:returntype",void 0)],u.prototype,"filterBySender",null),s([a.default(),i("design:type",Function),i("design:paramtypes",[Number,Object]),i("design:returntype",void 0)],u.prototype,"filterByTaget",null),s([a.default(),i("design:type",Function),i("design:paramtypes",[Function,Object]),i("design:returntype",void 0)],u.prototype,"filterByPlainText",null),t.default=u},461:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,o){function r(e){try{u(s.next(e))}catch(e){o(e)}}function a(e){try{u(s.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((s=s.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.EventFlow=void 0;const o=i(n(439)),r=i(n(522)),a=i(n(514)),u=n(768),d=n(372);t.EventFlow={};const l=new o.default(`${r.default.wsPath}/all?verifyKey=${r.default.verifyKey}&qq=${r.default.bot_qq}`);l.on("open",(function(){console.log("websocketè¿æ¥æˆåŠŸï¼"),a.default("ws","info","è¿æ¥æˆåŠŸï¼")})),l.on("error",(e=>{console.log("websocketé”™è¯¯"),a.default("error","error",e)})),l.on("close",((e,t)=>{console.log("websocketå…³é—­"),a.default("ws","info",`è¿æ¥å…³é—­ï¼code: ${e}ï¼Œmessage: ${t}`)})),l.addEventListener("message",(({data:e})=>s(void 0,void 0,void 0,(function*(){var n,s;const i=JSON.parse(e);if(i.data.code===u.CodeEnum.success)return void d.getSession(i);const o={message:i,targetQQ:i.data.sender.id,text:null===(s=null===(n=i.data.messageChain)||void 0===n?void 0:n.find((e=>"Plain"===e.type)))||void 0===s?void 0:s.text};for(let e of Object.keys(t.EventFlow)){const n=t.EventFlow[e](o);n instanceof Promise&&(yield n)}})))),t.default=l},178:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(461));t.default=class{constructor(e){this.msg=e,this.sendMessageList=[]}at(e,t=""){return this.sendMessageList.push({methodName:"at",params:[e,t],method:()=>{this.msg.content.messageChain.push({type:"At",target:e,display:t})}}),this}atAll(){return this.sendMessageList.push({methodName:"atAll",params:[],method:()=>{this.msg.content.messageChain.push({type:"AtAll"})}}),this}face(e,t){return e||t?(this.sendMessageList.push({methodName:"face",params:[e,t],method:()=>{this.msg.content.messageChain.push({type:"Face",faceId:e,name:t})}}),this):this}plain(e){return this.sendMessageList.push({methodName:"plain",params:[e],method:()=>{this.msg.content.messageChain.push({type:"Plain",text:e})}}),this}image(e){const{imageId:t,url:n,path:s,base64:i}=e;return t||n||!s||i?(this.sendMessageList.push({methodName:"image",params:[e],method:()=>{this.msg.content.messageChain.push({type:"Image",imageId:t,url:n,path:s,base64:i})}}),this):this}flashImage(e){const{imageId:t,url:n,path:s,base64:i}=e;return t||n||!s||i?(this.sendMessageList.push({methodName:"flashImage",params:[e],method:()=>{this.msg.content.messageChain.push({type:"FlashImage",imageId:t,url:n,path:s,base64:i})}}),this):this}poke(e){return this.sendMessageList.push({methodName:"poke",params:[e],method:()=>{this.msg.content.messageChain.push({type:"Poke",name:e})}}),this}dice(e){return this.sendMessageList.push({methodName:"dice",params:[e],method:()=>{this.msg.content.messageChain.push({type:"Dice",value:e})}}),this}exec(){this.sendMessageList.forEach((e=>{e.method()})),i.default.send(JSON.stringify(this.msg)),this.sendMessageList=[]}}},391:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(372),o=s(n(178)),r=s(n(116));t.default=new class{constructor(){}send(e,...t){let n={syncId:"-1",command:e,content:null};switch(e){case"sendGroupMessage":case"sendFriendMessage":return n.content={sessionKey:i.getSession(),target:t[0],messageChain:[]},new o.default(n);case"sendTempMessage":return n.content={sessionKey:i.getSession(),qq:t[0],group:t[1],messageChain:[]},new o.default(n);case"sendNudge":return void(n.content={sessionKey:i.getSession(),target:t[0],subject:t[1],kind:t[2]});case"recall":return void(n.content={sessionKey:i.getSession(),target:t[0]})}}get(e){return new r.default(e)}}},139:e=>{e.exports=require("@reduxjs/toolkit")},349:e=>{e.exports=require("dayjs")},455:e=>{e.exports=require("log4js")},619:e=>{e.exports=require("mongoose")},622:e=>{e.exports=require("path")},906:e=>{e.exports=require("reflect-metadata")},439:e=>{e.exports=require("ws")}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,n),o.exports}n(40),n(461),n(906),n(903)})();