(()=>{var e={852:function(e,t,n){e.exports=function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var n=t(e),s={name:"zh-cn",weekdays:"æ˜ŸæœŸæ—¥_æ˜ŸæœŸä¸€_æ˜ŸæœŸäºŒ_æ˜ŸæœŸä¸‰_æ˜ŸæœŸå››_æ˜ŸæœŸäº”_æ˜ŸæœŸå…­".split("_"),weekdaysShort:"å‘¨æ—¥_å‘¨ä¸€_å‘¨äºŒ_å‘¨ä¸‰_å‘¨å››_å‘¨äº”_å‘¨å…­".split("_"),weekdaysMin:"æ—¥_ä¸€_äºŒ_ä¸‰_å››_äº”_å…­".split("_"),months:"ä¸€æœˆ_äºŒæœˆ_ä¸‰æœˆ_å››æœˆ_äº”æœˆ_å…­æœˆ_ä¸ƒæœˆ_å…«æœˆ_ä¹æœˆ_åæœˆ_åä¸€æœˆ_åäºŒæœˆ".split("_"),monthsShort:"1æœˆ_2æœˆ_3æœˆ_4æœˆ_5æœˆ_6æœˆ_7æœˆ_8æœˆ_9æœˆ_10æœˆ_11æœˆ_12æœˆ".split("_"),ordinal:function(e,t){switch(t){case"W":return e+"å‘¨";default:return e+"æ—¥"}},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYYå¹´MæœˆDæ—¥",LLL:"YYYYå¹´MæœˆDæ—¥Ahç‚¹mmåˆ†",LLLL:"YYYYå¹´MæœˆDæ—¥ddddAhç‚¹mmåˆ†",l:"YYYY/M/D",ll:"YYYYå¹´MæœˆDæ—¥",lll:"YYYYå¹´MæœˆDæ—¥ HH:mm",llll:"YYYYå¹´MæœˆDæ—¥dddd HH:mm"},relativeTime:{future:"%så†…",past:"%så‰",s:"å‡ ç§’",m:"1 åˆ†é’Ÿ",mm:"%d åˆ†é’Ÿ",h:"1 å°æ—¶",hh:"%d å°æ—¶",d:"1 å¤©",dd:"%d å¤©",M:"1 ä¸ªæœˆ",MM:"%d ä¸ªæœˆ",y:"1 å¹´",yy:"%d å¹´"},meridiem:function(e,t){var n=100*e+t;return n<600?"å‡Œæ™¨":n<900?"æ—©ä¸Š":n<1100?"ä¸Šåˆ":n<1300?"ä¸­åˆ":n<1800?"ä¸‹åˆ":"æ™šä¸Š"}};return n.default.locale(s,null,!0),s}(n(349))},607:function(e){e.exports=function(){"use strict";return function(e,t,n){t.prototype.isBetween=function(e,t,s,i){var o=n(e),r=n(t),a="("===(i=i||"()")[0],u=")"===i[1];return(a?this.isAfter(o,s):!this.isBefore(o,s))&&(u?this.isBefore(r,s):!this.isAfter(r,s))||(a?this.isBefore(o,s):!this.isAfter(o,s))&&(u?this.isAfter(r,s):!this.isBefore(r,s))}}}()},903:function(e,t,n){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return i(t,e),t},r=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,o){function r(e){try{u(s.next(e))}catch(e){o(e)}}function a(e){try{u(s.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((s=s.apply(e,t||[])).next())}))},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const u=a(n(522)),l=a(n(391)),d=a(n(841)),c=a(n(397)),f=n(836),m=a(n(418)),p=n(461),h=a(n(94)),g=a(n(68)),y=a(n(90)),v=o(n(224)),_=a(n(814)),b=a(n(640)),q=a(n(349)),M=a(n(607));n(852);const P=/è¿Ÿåˆ°/gi,w=/ä¸è¿Ÿåˆ°|æ²¡æœ‰è¿Ÿåˆ°|ä¸ä¼šè¿Ÿåˆ°|ä¸å¯èƒ½è¿Ÿåˆ°|æ²¡è¿Ÿåˆ°|å‡†æ—¶åˆ°|å‡†ç‚¹åˆ°|è¿Ÿä¸åˆ°/gi;q.default.extend(M.default),p.EventFlow.saveFlashImage=e=>r(void 0,void 0,void 0,(function*(){var t,n;const{message:s}=e,i=null===(n=null===(t=null==s?void 0:s.data)||void 0===t?void 0:t.messageChain)||void 0===n?void 0:n.find((e=>"FlashImage"===e.type));if(null==i?void 0:i.url){const e=s.data.sender.id;_.default.create({qq:e,url:i.url})}})),p.EventFlow.addUser=e=>r(void 0,void 0,void 0,(function*(){var t,n;const{message:s}=e;if(null===(n=null===(t=null==s?void 0:s.data)||void 0===t?void 0:t.sender)||void 0===n?void 0:n.id){const{data:{sender:{id:e,memberName:t,specialTitle:n}}}=s;yield h.default.findOneAndUpdate({qq:s.data.sender.id},{qq:s.data.sender.id,memberName:t,specialTitle:n},{upsert:!0}).exec()}})),p.EventFlow.saveYuLiuMessage=e=>r(void 0,void 0,void 0,(function*(){const{message:t,targetQQ:n,commandText:s,text:i}=e;q.default().isBetween(q.default().set("hours",8).set("minutes",0).set("seconds",0),l.default.å°ç›˜æ—¶é—´())&&n===u.default.yuliu_qq&&b.default.saveMsg(i)})),p.EventFlow.filter=e=>{var t,n,s,i;const{message:o}=e,r=c.default.get(o).filterByMessageChainType("GroupMessage").filterByMessageType("At").filterByTaget(u.default.bot_qq).filterByPlainText((e=>e.trim().includes("#"))).exec();e.commandMessage=r,e.commandText=null!==(i=null===(s=null===(n=null===(t=null==r?void 0:r.data)||void 0===t?void 0:t.messageChain)||void 0===n?void 0:n.find((e=>"Plain"===e.type)))||void 0===s?void 0:s.text)&&void 0!==i?i:""},p.EventFlow.findFlashImage=e=>r(void 0,void 0,void 0,(function*(){const{message:t,targetQQ:n,commandText:s}=e,[i,o]=f.getParamCommand(s);if("æŸ¥è¯¢é—ªç…§"===i)try{const e=5;if(!o)throw new Error("\nè¯·è¾“å…¥æ­£ç¡®QQå·");const t=yield _.default.find({qq:o}).sort({createTime:"desc"}).limit(e).exec();if(t.length<=0)throw new Error("\næ²¡æœ‰æ•°æ®");let n="";throw n=t.reduce(((e,t,n)=>e+`\n${q.default(t.createTime).format("YYYY-MM-DD")}ï¼š${t.url}`),""),new Error(`\n<${o}>çš„æœ€è¿‘${e}å¼ é—ªç…§åœ°å€ï¼š`+n)}catch({message:t}){c.default.send("sendGroupMessage",u.default.group_qq).plain(t).exec()}})),p.EventFlow.bet=e=>r(void 0,void 0,void 0,(function*(){const{message:t,targetQQ:n,commandText:s}=e,[i,o]=f.isBetCommand(s);if(i&&o){const e=i.search(w)>=0?v.betType.ä¸è¿Ÿåˆ°:i.search(P)>=0?v.betType.è¿Ÿåˆ°:void 0;if(void 0===e)return;const{success:t,message:s}=yield v.default.bet(e,n,o);if(s)return void c.default.send("sendGroupMessage",u.default.group_qq).at(n).plain("\n"+s).face(void 0,"è¯·").exec();c.default.send("sendGroupMessage",u.default.group_qq).at(n).plain(`\næŠ¼æ³¨${v.betTypeText[e]}ï¼š${o}ç§¯åˆ†`).face(void 0,"åƒç³–").exec()}})),p.EventFlow.queryPoints=e=>r(void 0,void 0,void 0,(function*(){const{message:t,targetQQ:n,commandText:s}=e;if(f.isQueryPoints(s)){const e=yield y.default.findByQQ(n);if(e)return void c.default.send("sendGroupMessage",u.default.group_qq).at(n).plain(`\nå½“å‰è¿˜å‰©${e.remainPoints}ç§¯åˆ†\n${e.remainPoints<10?"ç©·é€¼ï¼":e.remainPoints>1e3?"å¢æœ‰é’±å‘":""}`).exec();c.default.send("sendGroupMessage",u.default.group_qq).at(n).plain("\næ²¡æœ‰è®°å½•ï¼Œå‘é€ #ç­¾åˆ° è¯•è¯•ï¼Ÿ").exec()}})),p.EventFlow.signIn=e=>r(void 0,void 0,void 0,(function*(){const{message:t,targetQQ:n,commandText:s}=e;if(f.isSignInCommand(s)){const e=m.default(),t=yield y.default.findByQQ(n),{success:s,message:i}=yield g.default.signIn(n,e);if(s){const{success:s,message:i}=yield t.addPoint(e);c.default.send("sendGroupMessage",u.default.group_qq).at(n).plain(s?`\nç­¾åˆ°æˆåŠŸï¼\nè·å¾—ç§¯åˆ†${e}!\n${e<=5?"maybe!":""}`:`\nç­¾åˆ°å¤±è´¥ï¼š\n${i}`).exec()}else c.default.send("sendGroupMessage",u.default.group_qq).at(n).plain(`\nç­¾åˆ°å¤±è´¥ï¼š${i}`).exec()}})),p.EventFlow.queryBet=e=>r(void 0,void 0,void 0,(function*(){var t,n,s,i,o,r,a,d;const{message:m,targetQQ:p,commandText:h,commandMessage:g}=e;if(f.isQueryBet(h)){const e=yield v.default.aggregate([{$facet:{late:[{$match:{betTime:{$gt:q.default().startOf("date").toDate(),$lt:l.default.å°ç›˜æ—¶é—´().toDate()},betType:{$eq:v.betType.è¿Ÿåˆ°}}},{$group:{_id:"null",betPoints:{$sum:"$betPoint"},betNum:{$sum:1},betUser:{$push:{qq:"$qq",betPoint:"$betPoint"}}}},{$project:{_id:0,betPoints:1,betNum:1,betUser:1}}],notLate:[{$match:{betTime:{$gt:q.default().startOf("date").toDate(),$lt:l.default.å°ç›˜æ—¶é—´().toDate()},betType:{$eq:v.betType.ä¸è¿Ÿåˆ°}}},{$group:{_id:"null",betPoints:{$sum:"$betPoint"},betNum:{$sum:1},betUser:{$push:{qq:"$qq",betPoint:"$betPoint"}}}},{$project:{_id:0,betPoints:1,betNum:1,betUser:1}}],targetUserBet:[{$match:{betTime:{$gt:q.default().startOf("date").toDate(),$lt:l.default.å°ç›˜æ—¶é—´().toDate()},qq:{$eq:String(p)}}},{$project:{betPoint:1,betTime:1,betType:1}}]}}]).exec(),f=null!==(n=null===(t=e[0].late[0])||void 0===t?void 0:t.betPoints)&&void 0!==n?n:0,m=null!==(i=null===(s=e[0].notLate[0])||void 0===s?void 0:s.betPoints)&&void 0!==i?i:0,h=f+m,g=null!==(r=null===(o=e[0].late[0])||void 0===o?void 0:o.betNum)&&void 0!==r?r:0,y=null!==(d=null===(a=e[0].notLate[0])||void 0===a?void 0:a.betNum)&&void 0!==d?d:0;let _;if(e[0].targetUserBet[0]){const{betPoint:t,betTime:n,betType:s}=e[0].targetUserBet[0];_=s===v.betType.è¿Ÿåˆ°?Math.floor(t/f*h):Math.floor(t/m*h)}c.default.send("sendGroupMessage",u.default.group_qq).at(p).plain(`\n      ä»Šæ—¥æŠ•æ³¨æƒ…å†µï¼š\n      è¿Ÿåˆ°ï¼š${f}ç§¯åˆ†ï¼ˆ${g}äººï¼‰\n      ä¸è¿Ÿåˆ°ï¼š${m}ç§¯åˆ†ï¼ˆ${y}äººï¼‰\n      ${_?`<${p}>å·²æŠ•æ³¨<${v.betTypeText[e[0].targetUserBet[0].betType]}>é¢„è®¡å¯è·å¾—ï¼š${_}ç§¯åˆ†`:""}\n      `).exec()}})),p.EventFlow.accountBet=e=>r(void 0,void 0,void 0,(function*(){var t,n,s,i;const{message:o,targetQQ:r,commandMessage:a}=e,m=c.default.get(a).exec(),[p,h]=f.getParamCommand(null!==(i=null===(s=null===(n=null===(t=null==m?void 0:m.data)||void 0===t?void 0:t.messageChain)||void 0===n?void 0:n.find((e=>"Plain"===e.type)))||void 0===s?void 0:s.text)&&void 0!==i?i:"");if("ç»“ç®—"===p){let e=h.search(w)>=0?v.betType.ä¸è¿Ÿåˆ°:h.search(P)>=0?v.betType.è¿Ÿåˆ°:void 0;const t=yield v.default.aggregate([{$match:{betTime:{$gt:q.default().startOf("date").toDate(),$lt:l.default.å°ç›˜æ—¶é—´().toDate()}}},{$lookup:{from:"gameusers",let:{qq:"$qq"},pipeline:[{$match:{$expr:{$eq:["$$qq","$qq"]}}},{$project:{_id:0,memberName:1,specialTitle:1}},{$lookup:{from:"userpoints",pipeline:[{$match:{$expr:{$eq:["$$qq","$qq"]}}}],as:"userpoints"}},{$unwind:{path:"$userpoints"}},{$replaceRoot:{newRoot:{$mergeObjects:["$userpoints","$$ROOT"]}}},{$project:{_id:0,memberName:1,remainPoints:1,specialTitle:1,totalPoints:1}}],as:"gameusers"}},{$unwind:{path:"$gameusers"}}]).exec();if(t.length<=0)return void c.default.send("sendGroupMessage",u.default.group_qq).at(r).plain("ä»Šå¤©è¿˜æ²¡æœ‰äººä¸‹æ³¨").exec();const n=t[0].betState!==v.betState.æœªç»“æŸ;e=n?t[0].betState:e;let s=0,i=0,o=0;t.forEach((e=>{s+=e.betPoint,e.betType===v.betType.è¿Ÿåˆ°?i+=e.betPoint:o+=e.betPoint}));const a=t=>{const{betPoint:r,betType:a,betProfit:u}=t;return n?u:a===v.betType.ä¸è¿Ÿåˆ°?e===a||void 0===e?Math.floor(r/o*s):0:e===a||void 0===e?Math.floor(r/i*s):0};let f='\nè¯·è¾“å…¥"è¿Ÿåˆ°"æˆ–è€…"æ²¡æœ‰è¿Ÿåˆ°"';const m=[];if(t.length>0){const e=new d.default;t.forEach((function(t){const s=a(t);m.push(Object.assign(Object.assign({},t),{betProfit:s})),e.cell("æ˜µç§°",t.gameusers.memberName),e.cell("æŠ•æ³¨ç±»å‹",v.betTypeText[t.betType]),e.cell("æŠ•æ³¨ç§¯åˆ†",t.betPoint),e.cell("å‰©ä½™ç§¯åˆ†",t.gameusers.remainPoints),e.cell(n?"è·å¾—ç§¯åˆ†":"é¢„è®¡å¾—åˆ†",s)})),f=e.output()}void 0===e||n||m.forEach((e=>{y.default.updateOne({qq:e.qq},{$inc:{remainPoints:e.betProfit}}).exec(),v.default.updateOne({qq:e.qq},{$set:{betState:e.betType,betProfit:e.betProfit}}).exec()})),c.default.send("sendGroupMessage",u.default.group_qq).at(r).plain("\n"+(n||void 0!==e?`å·²ç»“ç®—<${v.betTypeText[e]||v.betStateText[t[0].betState]}>`:"æœªç»“ç®—")+"\n"+f+"\n").exec()}})),p.EventFlow.pointsRank=e=>r(void 0,void 0,void 0,(function*(){const{message:t,targetQQ:n,commandText:s}=e;if(f.isCommand(s,/ç§¯åˆ†æ’è¡Œ/gi)){const e=yield y.default.aggregate([{$sort:{remainPoints:-1}},{$lookup:{from:"gameusers",let:{qq:"$qq"},as:"gameusers",pipeline:[{$match:{$expr:{$eq:["$$qq","$qq"]}}},{$project:{_id:0,memberName:1,specialTitle:1}}]}},{$unwind:{path:"$gameusers"}},{$project:{_id:0,qq:1,totalPoints:1,remainPoints:1,gameusers:1}}]).exec(),t=new d.default,n=e.length,s=5;let i=0,o=1;for(;i<n;){e.slice(i,i+=s).forEach(((e,n)=>{t.cell("æ’å",o++),t.cell("æ˜µç§°",e.gameusers.memberName),t.cell("å‰©ä½™ç§¯åˆ†",e.remainPoints),t.cell("æ€»è·å¾—ç§¯åˆ†",e.totalPoints)}));let n=t.output();c.default.send("sendGroupMessage",u.default.group_qq).plain("\n"+n+"\n").exec()}}})),p.EventFlow.queryMaybe=e=>r(void 0,void 0,void 0,(function*(){const{message:t,targetQQ:n,commandMessage:s,commandText:i}=e,[o,r]=f.getParamCommand(i);let a=q.default();if("æŸ¥è¯¢çœ‰ç¬”"===o){r&&q.default(r).isValid()&&(a=q.default(r));const e=yield g.default.find({signInTime:{$gt:a.startOf("date").toDate(),$lt:a.endOf("date").toDate()},point:{$lt:5}}).sort({point:1}).exec();e.length>0?c.default.send("sendGroupMessage",u.default.group_qq).plain(`${a.format("MM[æœˆ]DD[æ—¥]")}çš„çœ‰ç¬”æ˜¯\n`).at(e[0].qq).plain(`\ntaé€šè¿‡åŠªåŠ›ç­¾åˆ°è·å¾—äº†${e[0].point}åˆ†ï¼\n`).plain("\nè®©æˆ‘ä»¬æ­å–œta").face(void 0,"åº†ç¥").face(void 0,"åº†ç¥").exec():c.default.send("sendGroupMessage",u.default.group_qq).plain(`${a.format("MM[æœˆ]DD[æ—¥]")}æ²¡æœ‰çœ‰ç¬”\n`).exec()}})),p.EventFlow.help=e=>r(void 0,void 0,void 0,(function*(){const{message:t,targetQQ:n,commandText:s,commandMessage:i}=e;if(f.isCommand(s,/å‘½ä»¤/gi)){let e="";for(let t in f.commandList)e+=`\n${t}ï¼š${f.commandList[t]}`;c.default.send("sendGroupMessage",u.default.group_qq).at(n).plain(e).exec()}}))},391:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(349));function o(){return i.default().set("hours",9).set("minutes",30).set("seconds",0)}const r={è¿Ÿåˆ°æ‰£é’±:30,ä¸Šç­æ—¶é—´:o,å°ç›˜æ—¶é—´:function(){return o().subtract(10,"minute")}};t.default=r},692:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={uri:"mongodb://admin:xh19963900@127.0.0.1:27017",connectionOptions:{useNewUrlParser:!0,useUnifiedTopology:!0,dbName:"areyoulate"}}},8:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(622));t.default={appenders:{defualt:{type:"file",filename:i.default.join(__dirname,"../log/defualt.log"),layout:{type:"coloured"}},errors:{type:"dateFile",category:"dateFileLog",filename:i.default.join(__dirname,"../log/errors/"),pattern:"yyyy-MM-dd.log",alwaysIncludePattern:!0,layout:{type:"coloured"}},ws:{type:"file",filename:i.default.join(__dirname,"../log/ws.log"),layout:{type:"coloured"}},db:{type:"file",filename:i.default.join(__dirname,"../log/db.log"),layout:{type:"coloured"}}},categories:{default:{appenders:["defualt"],level:"info"},error:{appenders:["errors"],level:"error"},ws:{appenders:["ws"],level:"info"},db:{appenders:["db"],level:"info"}}}},522:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n={wsPath:"ws://172.17.82.247:3002",httpPath:"http://172.17.82.247:3001",verifyKey:1234567890,bot_qq:"1092946821",group_qq:"599869861",admin_qq:"929175050",yuliu_qq:"1916300010"};t.default=n},40:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(619)),o=s(n(692)),r=s(n(514));i.default.set("useFindAndModify",!1),i.default.connect(o.default.uri,o.default.connectionOptions,(e=>{e?(console.log("[MongooseğŸ¦¢] è¿æ¥å¤±è´¥"),r.default("db","error",e)):(console.log("[MongooseğŸ¦¢] è¿æ¥æˆåŠŸ"),r.default("db","info","[MongooseğŸ¦¢] è¿æ¥æˆåŠŸ"))})),t.default=i.default},224:function(e,t,n){"use strict";var s=this&&this.__decorate||function(e,t,n,s){var i,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,o){function r(e){try{u(s.next(e))}catch(e){o(e)}}function a(e){try{u(s.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((s=s.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.betStateText=t.betState=t.betTypeText=t.betType=void 0;const a=r(n(391)),u=r(n(727)),l=n(551),d=r(n(349)),c=n(619),f=r(n(90)),m=/æ¢­å“ˆ|allin/gi;var p,h;!function(e){e[e["è¿Ÿåˆ°"]=0]="è¿Ÿåˆ°",e[e["ä¸è¿Ÿåˆ°"]=1]="ä¸è¿Ÿåˆ°"}(p=t.betType||(t.betType={})),t.betTypeText={[p.è¿Ÿåˆ°]:"è¿Ÿåˆ°",[p.ä¸è¿Ÿåˆ°]:"ä¸è¿Ÿåˆ°"},function(e){e[e["è¿Ÿåˆ°"]=0]="è¿Ÿåˆ°",e[e["ä¸è¿Ÿåˆ°"]=1]="ä¸è¿Ÿåˆ°",e[e["æœªç»“æŸ"]=2]="æœªç»“æŸ"}(h=t.betState||(t.betState={})),t.betStateText={[h.è¿Ÿåˆ°]:"è¿Ÿåˆ°",[h.ä¸è¿Ÿåˆ°]:"ä¸è¿Ÿåˆ°",[h.æœªç»“æŸ]:"æœªç»“æŸ"};const g=new c.Schema({qq:{type:c.Schema.Types.String,required:!0},betPoint:{type:c.Schema.Types.Number,require:!1,validate:{validator:function(e){return e<0&&l.thorwCustomError("åªèƒ½æŠ•æ³¨æ­£æ•°"),Number.isInteger(e)||l.thorwCustomError("åªèƒ½æŠ•æ³¨æ•´æ•°"),!0}},default:()=>0},betTime:{type:c.Schema.Types.Date,require:!1,default:()=>d.default().toDate()},betType:{type:c.Schema.Types.Number,require:!1},betState:{type:c.Schema.Types.Number,require:!1,default:()=>h.æœªç»“æŸ},betProfit:{type:c.Schema.Types.Number,require:!1,default:()=>0}});class y{static bet(e,n,s){return o(this,void 0,void 0,(function*(){let i=0;d.default().isAfter(a.default.å°ç›˜æ—¶é—´())&&l.thorwCustomError(`æ¯å¤© ${a.default.å°ç›˜æ—¶é—´().format("HH:mm:ss")} å‰å¯æŠ•æ³¨ï¼`);const o=yield this.findByQQ(n,{betTime:{$gt:d.default().startOf("date").toDate(),$lt:a.default.å°ç›˜æ—¶é—´().toDate()}});o&&void 0!==(null==o?void 0:o.betType)&&o.betType!==e&&l.thorwCustomError(`ä½ å·²è®¤å®šæ‘†å­å“¥ ${t.betTypeText[o.betType]}äº†!æ”¹ä¸äº†å’¯~`);const r=yield f.default.findByQQ(n),u=Number(s);isNaN(u)?m.test(s)?i=r.remainPoints:l.thorwCustomError("æŒ‡ä»¤ä¸æ­£ç¡®"):((u<=0||!Number.isInteger(u))&&l.thorwCustomError("åªèƒ½ä¸ºæ­£æ•´æ•°"),i=u),0===i&&l.thorwCustomError("ä½ æ²¡æœ‰è¶³å¤Ÿçš„ç§¯åˆ†ï¼"),r.remainPoints>=i?(yield o.updateOne({$inc:{betPoint:i},betTime:d.default().toDate(),betType:e}).exec(),yield r.updateOne({$inc:{remainPoints:-i}}).exec()):l.thorwCustomError("ä½ æ²¡æœ‰è¶³å¤Ÿçš„ç§¯åˆ†ï¼ç©·é€¼!")}))}static findByQQ(e,t){return o(this,void 0,void 0,(function*(){const n=yield this.findOne(Object.assign({qq:e},t)).exec();return n||(yield this.create({qq:e,betState:h.æœªç»“æŸ}))}))}}s([u.default(),i("design:type",Function),i("design:paramtypes",[Number,String,Object]),i("design:returntype",Promise)],y,"bet",null),g.loadClass(y);const v=c.model("Bet",g);t.default=v},814:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(349)),o=n(619),r=new o.Schema({qq:{type:o.Schema.Types.String,required:!0},url:{type:o.Schema.Types.String,require:!0},createTime:{type:o.Schema.Types.String,require:!1,default:()=>i.default().toDate()}});r.loadClass(class{});const a=o.model("FlashImage",r);t.default=a},94:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=n(619),i=new s.Schema({qq:{type:s.Schema.Types.String,required:!0},memberName:{type:s.Schema.Types.String,require:!0},specialTitle:{type:s.Schema.Types.String,require:!0}});t.default=s.models&&s.models.GameUser||s.model("GameUser",i)},68:function(e,t,n){"use strict";var s=this&&this.__decorate||function(e,t,n,s){var i,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,o){function r(e){try{u(s.next(e))}catch(e){o(e)}}function a(e){try{u(s.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((s=s.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n(727)),u=n(551),l=r(n(349)),d=n(619),c=new d.Schema({qq:{type:d.Schema.Types.String,required:!0},signInTime:{type:d.Schema.Types.Date,require:!1,default:()=>l.default().toDate()},point:{type:d.Schema.Types.Number,require:!0}});class f{static signIn(e,t){return o(this,void 0,void 0,(function*(){(yield this.findOne({qq:e,signInTime:{$gt:l.default().startOf("date").toDate()}}).exec())?u.thorwCustomError("ä»Šå¤©å·²ç­¾åˆ°"):yield this.create({qq:e,point:null!=t?t:0})}))}}s([a.default(),i("design:type",Function),i("design:paramtypes",[String,Number]),i("design:returntype",Promise)],f,"signIn",null),c.loadClass(f);const m=d.model("SignIn",c);t.default=m},90:function(e,t,n){"use strict";var s=this&&this.__decorate||function(e,t,n,s){var i,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,o){function r(e){try{u(s.next(e))}catch(e){o(e)}}function a(e){try{u(s.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((s=s.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=n(619),u=r(n(727)),l=n(551),d=new a.Schema({qq:{type:a.Schema.Types.String,required:!0},totalPoints:{type:a.Schema.Types.Number,require:!1,validate:{validator:function(e){return e<0&&l.thorwCustomError("ä¸èƒ½å†å‡å°‘"),Number.isInteger(e)||l.thorwCustomError("åªèƒ½ä¸ºæ•´æ•°"),!0}},default:()=>0},remainPoints:{type:a.Schema.Types.Number,require:!1,validate:{validator:function(e){return e<0&&l.thorwCustomError("ä¸èƒ½å†å‡å°‘"),Number.isInteger(e)||l.thorwCustomError("åªèƒ½ä¸ºæ•´æ•°"),!0}},default:()=>0}});class c{addPoint(e){return o(this,void 0,void 0,(function*(){this.updateOne({$inc:{totalPoints:e,remainPoints:e}}).exec()}))}subPoint(e){return o(this,void 0,void 0,(function*(){const t=this.remainPoints-e;yield this.updateOne({remainPoints:t<0?0:t}).exec()}))}static findByQQ(e){return o(this,void 0,void 0,(function*(){const t=yield this.findOne({qq:e}).exec();return t||(yield this.create({qq:e}))}))}}s([u.default("æ·»åŠ ç§¯åˆ†å¤±è´¥ï¼"),i("design:type",Function),i("design:paramtypes",[Number]),i("design:returntype",Promise)],c.prototype,"addPoint",null),s([u.default("å‡å°‘ç§¯åˆ†å¤±è´¥ï¼"),i("design:type",Function),i("design:paramtypes",[Number]),i("design:returntype",Promise)],c.prototype,"subPoint",null),d.loadClass(c);const f=a.model("UserPoints",d);t.default=f},640:function(e,t,n){"use strict";var s=this&&this.__decorate||function(e,t,n,s){var i,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,o){function r(e){try{u(s.next(e))}catch(e){o(e)}}function a(e){try{u(s.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((s=s.apply(e,t||[])).next())}))},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n(727)),u=r(n(349)),l=n(619),d=new l.Schema({msg:{type:l.Schema.Types.String,required:!0},saveTime:{type:l.Schema.Types.Date,require:!1,default:()=>u.default().toDate()}});class c{static saveMsg(e){return o(this,void 0,void 0,(function*(){e&&(yield this.create({msg:e}))}))}}s([a.default(),i("design:type",Function),i("design:paramtypes",[String]),i("design:returntype",Promise)],c,"saveMsg",null),d.loadClass(c);const f=l.model("YuliuMsg",d);t.default=f},718:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.store=void 0;const i=n(139),o=s(n(578));t.store=i.configureStore({reducer:{session:o.default}})},578:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.saveSession=t.sessionSlice=void 0;const s=n(139);t.sessionSlice=s.createSlice({name:"session",initialState:{session:""},reducers:{saveSession:(e,t)=>{e.session=t.payload}}}),t.saveSession=t.sessionSlice.actions.saveSession,t.default=t.sessionSlice.reducer},768:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeEnum=t.CodeText=void 0,t.CodeText={0:"æ­£å¸¸",1:"é”™è¯¯çš„verify key",2:"æŒ‡å®šçš„Botä¸å­˜åœ¨",3:"Sessionå¤±æ•ˆæˆ–ä¸å­˜åœ¨",4:"Sessionæœªè®¤è¯(æœªæ¿€æ´»)",5:"å‘é€æ¶ˆæ¯ç›®æ ‡ä¸å­˜åœ¨(æŒ‡å®šå¯¹è±¡ä¸å­˜åœ¨)",6:"æŒ‡å®šæ–‡ä»¶ä¸å­˜åœ¨ï¼Œå‡ºç°äºå‘é€æœ¬åœ°å›¾ç‰‡",10:"æ— æ“ä½œæƒé™ï¼ŒæŒ‡Botæ²¡æœ‰å¯¹åº”æ“ä½œçš„é™æƒ",11:"Botè¢«ç¦è¨€ï¼ŒæŒ‡Botå½“å‰æ— æ³•å‘æŒ‡å®šç¾¤å‘é€æ¶ˆæ¯",30:"æ¶ˆæ¯è¿‡é•¿",400:"é”™è¯¯çš„è®¿é—®ï¼Œå¦‚å‚æ•°é”™è¯¯ç­‰"},function(e){e[e.success=0]="success",e[e.errorVerifyKey=1]="errorVerifyKey",e[e.noBot=2]="noBot",e[e.sessionNotExsist=3]="sessionNotExsist",e[e.sessionNotActive=4]="sessionNotActive",e[e.targetLost=5]="targetLost",e[e.fileLost=6]="fileLost",e[e.permissionDeny=10]="permissionDeny",e[e.forbiddenWords=11]="forbiddenWords",e[e.longMessage=30]="longMessage",e[e.error=400]="error"}(t.CodeEnum||(t.CodeEnum={}))},836:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isQueryBet=t.isQueryPoints=t.isSignInCommand=t.isBetCommand=t.getParamCommand=t.isCommand=t.commandList=void 0,t.commandList={æŠ•æ³¨:"#[è¿Ÿåˆ° | æ²¡è¿Ÿåˆ°] [æŠ•æ³¨ç‚¹æ•°]",æŸ¥è¯¢ç§¯åˆ†:"#æŸ¥è¯¢ç§¯åˆ†",ç­¾åˆ°:"#ç­¾åˆ°",æŸ¥è¯¢æŠ•æ³¨:"#æŸ¥è¯¢æŠ•æ³¨",ç»“ç®—:"#ç»“ç®— [è¿Ÿåˆ° | æ²¡è¿Ÿåˆ°]"},t.isCommand=function(e,t){if(!e)return;const n=e.split("#");return t instanceof RegExp?t.test(n[1]):n[1]===t},t.getParamCommand=function(e){if(!e)return["",""];const t=e.split("#");if(2===t.length){const e=t[1].split(" ");if(2===e.length){const[t,n]=e;return[t,n]}return[e[0],""]}return["",""]},t.isBetCommand=function(e){if(!e)return["",""];const t=e.split("#");if(2===t.length){const e=t[1].split(" ");if(2===e.length){const[t,n]=e;return[t,n]}}return["",""]},t.isSignInCommand=function(e){if(!e)return;const t=/ç­¾åˆ°$/gi,n=e.split("#");return!(2!==n.length||!t.test(n[1]))},t.isQueryPoints=function(e){if(!e)return;return"æŸ¥è¯¢ç§¯åˆ†"===e.split("#")[1]},t.isQueryBet=function(e){if(!e)return;return"æŸ¥è¯¢æŠ•æ³¨"===e.split("#")[1]}},580:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return function(e,t,n){const s=n.value;n.value=function(...e){const n=this.actionList.length;return this.actionList.push({methodName:t,params:e,method:()=>{let t;n>0?this.filteredMsg&&(t=Object.assign({},this.filteredMsg)):t=Object.assign({},this.msg),s.apply(this,[...e,t])}}),this}}}},727:function(e,t,n){"use strict";var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,o){function r(e){try{u(s.next(e))}catch(e){o(e)}}function a(e){try{u(s.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((s=s.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=n(551),r=i(n(514));t.default=function(e){return function(t,n,i){const a=i.value;i.value=function(...t){return s(this,void 0,void 0,(function*(){try{return yield a.call(this,...t),{success:!0}}catch(t){return t.name!==o.ErrorNames.custom&&r.default("db","error",t),{message:e||t.message}}}))}}}},551:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.thorwCustomError=t.ErrorNames=void 0,t.ErrorNames={custom:"custom"},t.thorwCustomError=function(e){const t=new Error(e);throw t.name="custom",t}},514:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(455)),o=s(n(8));i.default.configure(o.default),t.default=function(e,t,n){i.default.getLogger(e)[t](n)}},418:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=100;function s(e,t){return Math.round(e+Math.random()*(t-e))}t.default=()=>Math.random()>=1-1/s(2,3)?s(1,n/s(7,10)):Math.random()>=1-1/s(3,5)?s(1,n/s(5,7)):Math.random()>=1-1/s(5,7)?s(1,n/s(3,5)):s(1,n)},372:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSession=void 0;const s=n(718),i=n(578),o=n(551);t.getSession=function(e){const{session:t}=s.store.getState().session;return t||(e?(s.store.dispatch(i.saveSession(e.data.session)),e.data.session):void o.thorwCustomError("no session!"))}},841:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToDBC=void 0;function n(e){let t="";for(let n=0;n<e.length;n++)32!=e.charCodeAt(n)?e.charCodeAt(n)<127?t+=String.fromCharCode(e.charCodeAt(n)+65248):t+=e[n]:t+=String.fromCharCode(12288);return t}t.ToDBC=n,t.default=class{constructor(e=[],t="ã€€",n=[],s=0){this.cells=e,this.fullWidthSpace=t,this.columns=n,this.maxRows=s}detectValue(e){const t=e.length;return{width:t,isFullWidth:e.length!==t}}calculateColMaxWidth(){this.columns.forEach((e=>{let t=0;const n=e.colName.length;this.maxRows=e.colValues.length>this.maxRows?e.colValues.length:this.maxRows,e.colValues.forEach((e=>{const n=String(e).length;t=n>t?n:t})),t=n>t?n:t,e.maxWidth=t}))}cell(e,t,s){const i=n(String(t));this.cells.push({colName:e,colValue:i,detectedResult:this.detectValue(i)});const o=this.columns.find((t=>t.colName===e));o?o.colValues.push(i):this.columns.push({colName:e,colValues:[i]})}renderRow(){let e="";const t=this.maxRows;for(let n=-2;n<t;n++)this.columns.forEach(((t,s)=>{let i="";i=-2===n?t.colName:-1===n?"ï¼".repeat(t.maxWidth):String(t.colValues[n]),e+=i,e+=this.fullWidthSpace.repeat(t.maxWidth+2-i.length)})),e+="\n";return e}output(){this.calculateColMaxWidth();const e=this.renderRow();return this.reset(),e}reset(){this.cells=[],this.columns=[],this.maxRows=0}}},116:function(e,t,n){"use strict";var s=this&&this.__decorate||function(e,t,n,s){var i,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,s);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(r=(o<3?i(r):o>3?i(t,n,r):i(t,n))||r);return o>3&&r&&Object.defineProperty(t,n,r),r},i=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(580));class a{constructor(e){this.msg=e,this.actionList=[]}filterByMessageChainType(e,t){return t&&(t.data.type===e?this.filteredMsg=t:this.filteredMsg=void 0),this}filterByMessageType(e,t){return t&&(t.data.messageChain&&t.data.messageChain.some((t=>t.type===e))?this.filteredMsg=t:this.filteredMsg=void 0),this}filterBySender(e,t){var n,s;return t&&(Array.isArray(e)?e.some((e=>{var n,s;return e===String(null===(s=null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.sender)||void 0===s?void 0:s.id)}))?this.filteredMsg=t:this.filteredMsg=void 0:String(null===(s=null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.sender)||void 0===s?void 0:s.id)===e?this.filteredMsg=t:this.filteredMsg=void 0),this}filterByTaget(e,t){if(!(t&&t.data.messageChain&&t.data.messageChain.some((t=>String(t.target)===e))))return this.filteredMsg=void 0,this;this.filteredMsg=t}filterByPlainText(e,t){if(t&&t.data.messageChain){const n=t.data.messageChain.find((t=>"Plain"===t.type&&e(t.text)));this.filteredMsg=n?t:void 0}return this}exec(){return this.actionList.forEach((e=>{e.method()})),this.actionList=[],this.filteredMsg}}s([r.default(),i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",void 0)],a.prototype,"filterByMessageChainType",null),s([r.default(),i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",void 0)],a.prototype,"filterByMessageType",null),s([r.default(),i("design:type",Function),i("design:paramtypes",[Object,Object]),i("design:returntype",void 0)],a.prototype,"filterBySender",null),s([r.default(),i("design:type",Function),i("design:paramtypes",[String,Object]),i("design:returntype",void 0)],a.prototype,"filterByTaget",null),s([r.default(),i("design:type",Function),i("design:paramtypes",[Function,Object]),i("design:returntype",void 0)],a.prototype,"filterByPlainText",null),t.default=a},461:function(e,t,n){"use strict";var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,o){function r(e){try{u(s.next(e))}catch(e){o(e)}}function a(e){try{u(s.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,a)}u((s=s.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.EventFlow=void 0;const o=i(n(439)),r=i(n(522)),a=i(n(514)),u=n(768),l=n(372);t.EventFlow={};class d{static getWS(){return d.WSInstance?d.WSInstance:d.createWS()}static createWS(){const e=new o.default(`${r.default.wsPath}/all?verifyKey=${r.default.verifyKey}&qq=${r.default.bot_qq}`);return e.on("open",(function(){console.log("websocketè¿æ¥æˆåŠŸï¼"),a.default("ws","info","è¿æ¥æˆåŠŸï¼")})),e.on("error",(e=>{console.log("websocketé”™è¯¯"),a.default("error","error",e),this.reconnect()})),e.on("close",((e,t)=>{console.log("websocketå…³é—­"),a.default("ws","info",`è¿æ¥å…³é—­ï¼code: ${e}ï¼Œmessage: ${t}`),this.reconnect()})),e.onmessage=({data:e})=>s(this,void 0,void 0,(function*(){var n,s,i,o,r,a,d;const c=JSON.parse(e.toString());if(c.data.code===u.CodeEnum.success)return void l.getSession(c);const f={message:c,targetQQ:String(null===(i=null===(s=null===(n=c)||void 0===n?void 0:n.data)||void 0===s?void 0:s.sender)||void 0===i?void 0:i.id),text:null===(d=null===(a=null===(r=null===(o=c)||void 0===o?void 0:o.data)||void 0===r?void 0:r.messageChain)||void 0===a?void 0:a.find((e=>"Plain"===e.type)))||void 0===d?void 0:d.text};for(let e of Object.keys(t.EventFlow)){const n=t.EventFlow[e](f);n instanceof Promise&&(yield n)}})),d.WSInstance=e,e}static reconnect(){d.reconnection||(a.default("ws","info",`æ­£åœ¨é‡è¿${++d.reConnectCount}æ¬¡`),d.reConnectCount>=10?a.default("ws","error","é‡è¿è¶…æ—¶"):(d.reconnection=!0,setTimeout((()=>{d.createWS(),d.reconnection=!1}),2e3)))}}d.reConnectCount=0,t.default=d.getWS()},178:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=s(n(461));t.default=class{constructor(e){this.msg=e,this.sendMessageList=[]}at(e,t=""){return this.sendMessageList.push({methodName:"at",params:[e,t],method:()=>{this.msg.content.messageChain.push({type:"At",target:e,display:t})}}),this}atAll(){return this.sendMessageList.push({methodName:"atAll",params:[],method:()=>{this.msg.content.messageChain.push({type:"AtAll"})}}),this}face(e,t){return e||t?(this.sendMessageList.push({methodName:"face",params:[e,t],method:()=>{this.msg.content.messageChain.push({type:"Face",faceId:e,name:t})}}),this):this}plain(e){return this.sendMessageList.push({methodName:"plain",params:[e],method:()=>{this.msg.content.messageChain.push({type:"Plain",text:e})}}),this}image(e){const{imageId:t,url:n,path:s,base64:i}=e;return t||n||!s||i?(this.sendMessageList.push({methodName:"image",params:[e],method:()=>{this.msg.content.messageChain.push({type:"Image",imageId:t,url:n,path:s,base64:i})}}),this):this}flashImage(e){const{imageId:t,url:n,path:s,base64:i}=e;return t||n||!s||i?(this.sendMessageList.push({methodName:"flashImage",params:[e],method:()=>{this.msg.content.messageChain.push({type:"FlashImage",imageId:t,url:n,path:s,base64:i})}}),this):this}poke(e){return this.sendMessageList.push({methodName:"poke",params:[e],method:()=>{this.msg.content.messageChain.push({type:"Poke",name:e})}}),this}dice(e){return this.sendMessageList.push({methodName:"dice",params:[e],method:()=>{this.msg.content.messageChain.push({type:"Dice",value:e})}}),this}exec(){this.sendMessageList.forEach((e=>{e.method()})),i.default.send(JSON.stringify(this.msg)),this.sendMessageList=[]}}},397:function(e,t,n){"use strict";var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(372),o=s(n(178)),r=s(n(116));t.default=new class{constructor(){}send(e,...t){let n={syncId:"-1",command:e,content:null};switch(e){case"sendGroupMessage":case"sendFriendMessage":return n.content={sessionKey:i.getSession(),target:t[0],messageChain:[]},new o.default(n);case"sendTempMessage":return n.content={sessionKey:i.getSession(),qq:t[0],group:t[1],messageChain:[]},new o.default(n);case"sendNudge":return void(n.content={sessionKey:i.getSession(),target:t[0],subject:t[1],kind:t[2]});case"recall":return void(n.content={sessionKey:i.getSession(),target:t[0]})}}get(e){return new r.default(e)}}},139:e=>{"use strict";e.exports=require("@reduxjs/toolkit")},349:e=>{"use strict";e.exports=require("dayjs")},455:e=>{"use strict";e.exports=require("log4js")},619:e=>{"use strict";e.exports=require("mongoose")},622:e=>{"use strict";e.exports=require("path")},906:e=>{"use strict";e.exports=require("reflect-metadata")},439:e=>{"use strict";e.exports=require("ws")}},t={};function n(s){var i=t[s];if(void 0!==i)return i.exports;var o=t[s]={exports:{}};return e[s].call(o.exports,o,o.exports,n),o.exports}(()=>{"use strict";n(906),n(40),n(461),n(903)})()})();